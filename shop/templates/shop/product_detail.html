{% extends "shop/base.html" %}
{% block title %}{{ product.name }} ¬∑ Cat√°logo de Daniela{% endblock %}

{% block content %}
<style>
  .back-link{
    border-radius: 14px;
    font-weight: 900;
    padding: .6rem 1rem;
    border: 1px solid rgba(17,24,39,.10);
    background: rgba(255,255,255,.86);
    color: #111827;
  }
  .back-link:hover{ background: rgba(255,255,255,.96); }

  .detail-card{
    border-radius: 22px;
    overflow: hidden;
    background:
      radial-gradient(900px 420px at 10% 0%, rgba(236,72,153,.16), transparent 60%),
      radial-gradient(820px 420px at 90% 10%, rgba(139,92,246,.16), transparent 60%),
      rgba(255,255,255,.90);
    border: 1px solid rgba(255,255,255,.60);
    box-shadow: 0 22px 55px rgba(17,24,39,.10);
    backdrop-filter: blur(12px);
  }

  .img-wrap{
    position: relative;
    height: 360px;
    background: linear-gradient(135deg, rgba(236,72,153,.10), rgba(139,92,246,.10));
  }
  .img-wrap img{
    width:100%;
    height:100%;
    object-fit: cover;
  }
  .img-wrap::after{
    content:"";
    position:absolute; inset:0;
    background: linear-gradient(180deg, rgba(0,0,0,.00), rgba(17,24,39,.22));
    pointer-events:none;
  }
  .floating-badges{
    position:absolute;
    top: 14px;
    left: 14px;
    display:flex;
    gap:10px;
    z-index:2;
  }
  .badge-soft{
    border-radius: 999px;
    padding: .40rem .70rem;
    font-weight: 900;
    border: 1px solid rgba(255,255,255,.35);
    box-shadow: 0 10px 20px rgba(0,0,0,.10);
    color:#fff;
  }
  .badge-new{
    background: linear-gradient(135deg, rgba(99,102,241,.95), rgba(139,92,246,.95));
  }
  .badge-top{
    background: linear-gradient(135deg, rgba(236,72,153,.95), rgba(245,158,11,.92));
  }
  .badge-stock{
    background: linear-gradient(135deg, rgba(34,197,94,.95), rgba(22,163,74,.95));
  }
  .badge-out{
    background: rgba(107,114,128,.92);
  }

  .price-big{
    font-size: 1.35rem;
    font-weight: 900;
    letter-spacing: -.4px;
  }

  .btn-gradient{
    border:0;
    color:#fff !important;
    border-radius: 14px;
    font-weight: 900;
    padding: .62rem 1.05rem;
    background: linear-gradient(135deg, #ec4899, #8b5cf6);
    box-shadow: 0 16px 34px rgba(236,72,153,.18);
    transition: transform .12s ease, filter .12s ease;
  }
  .btn-gradient:hover{ filter: brightness(1.03); transform: translateY(-1px); }

  .btn-add{
    border: 0;
    color: #fff !important;
    border-radius: 14px;
    font-weight: 900;
    padding: .62rem 1.05rem;
    background: linear-gradient(135deg, #22c55e, #16a34a);
    box-shadow: 0 16px 34px rgba(34,197,94,.16);
    transition: transform .12s ease, filter .12s ease;
  }
  .btn-add:hover{ filter: brightness(1.03); transform: translateY(-1px); }

  .btn-ghost{
    border-radius: 14px;
    font-weight: 900;
    padding: .62rem 1.05rem;
    border: 1px solid rgba(17,24,39,.10);
    background: rgba(255,255,255,.86);
    color: #111827;
  }
  .btn-ghost:hover{ background: rgba(255,255,255,.96); }

  .muted{ color:#6b7280; }
  .soft-line{ border-top: 1px solid rgba(17,24,39,.08); }
</style>

<div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-3">
  <a class="back-link text-decoration-none" href="{% url 'product_list' %}">‚Üê Volver</a>

  <div class="d-flex gap-2 flex-wrap">
    <a class="btn btn-ghost" href="{% url 'cart_detail' %}">üõí Ver carrito</a>
    <a class="btn btn-gradient" href="https://wa.me/51944739301" target="_blank">üí¨ Consultar a Daniela</a>
  </div>
</div>

<div class="detail-card">
  <div class="img-wrap">
    <div class="floating-badges">
      {# Nuevo visual (si quieres hacerlo real luego) #}
      <span class="badge-soft badge-new">Nuevo</span>

      {# Top por precio alto (solo visual) #}
      {% if product.price|floatformat:0|add:"0" >= 80 %}
        <span class="badge-soft badge-top">Top</span>
      {% endif %}

      {% if product.stock > 0 %}
        <span class="badge-soft badge-stock">En stock</span>
      {% else %}
        <span class="badge-soft badge-out">Sin stock</span>
      {% endif %}
    </div>

    {% if product.image %}
      <img src="{{ product.image.url }}" alt="{{ product.name }}">
    {% else %}
      <div class="d-flex align-items-center justify-content-center h-100">
        <div class="text-center">
          <div class="fw-bold">Sin imagen</div>
          <div class="text-muted small">Daniela puede subir una foto desde el Admin ‚ú®</div>
        </div>
      </div>
    {% endif %}
  </div>

  <div class="p-4 p-md-4">
    <div class="d-flex align-items-start justify-content-between flex-wrap gap-2">
      <div>
        <h2 class="fw-bold mb-1">{{ product.name }}</h2>
        <div class="muted">
          {% if product.stock > 0 %}
            Stock disponible: <b>{{ product.stock }}</b>
          {% else %}
            Disponible pronto üíñ
          {% endif %}
        </div>
      </div>

      <div class="text-end">
        <div class="muted small">Precio</div>
        <div class="price-big">S/ {{ product.price }}</div>
      </div>
    </div>

    {% if product.description %}
      <hr class="soft-line my-3">
      <p class="muted mb-0" style="max-width: 70ch;">
        {{ product.description }}
      </p>
    {% endif %}

    <hr class="soft-line my-3">

    <div class="d-flex gap-2 flex-wrap">
      {% if product.stock > 0 %}
        <a class="btn btn-add" href="{% url 'cart_add' product.id %}">
          ‚ûï Agregar al carrito
        </a>
      {% else %}
        <button class="btn btn-ghost" disabled style="opacity:.7;">
          Agotado
        </button>
      {% endif %}

      <a class="btn btn-ghost" href="{% url 'cart_detail' %}">üõí Ver carrito</a>

      <a class="btn btn-gradient" href="https://wa.me/51944739301" target="_blank">
        üí¨ Consultar por WhatsApp
      </a>
    </div>

    <div class="muted small mt-3">
      Delivery por coordinaci√≥n ¬∑ Atenci√≥n r√°pida por WhatsApp
    </div>
  </div>
</div>
{% endblock %}
